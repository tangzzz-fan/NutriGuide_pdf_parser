INFO:     Will watch for changes in these directories: ['/Users/apple/Developments/NutriGuide/backend/pdf_parser']
INFO:     Uvicorn running on http://0.0.0.0:7800 (Press CTRL+C to quit)
INFO:     Started reloader process [27670] using StatReload
[32m2025-06-05 16:48:16[0m | [1mINFO    [0m | [36mservices.pdf_parser[0m:[36m__init__[0m:[36m19[0m | [1mUsing mock PDF parser service[0m
[32m2025-06-05 16:48:16[0m | [1mINFO    [0m | [36mservices.pdf_parser[0m:[36m__init__[0m:[36m19[0m | [1mUsing mock PDF parser service[0m
INFO:     Started server process [27674]
INFO:     Waiting for application startup.
[32m2025-06-05 16:48:16[0m | [1mINFO    [0m | [36mmain[0m:[36mlifespan[0m:[36m43[0m | [1mStarting PDF Parser Service...[0m
[32m2025-06-05 16:48:16[0m | [1mINFO    [0m | [36mservices.database[0m:[36mconnect[0m:[36m46[0m | [1mMongoDB 连接成功: nutriguide_pdf[0m
[32m2025-06-05 16:48:16[0m | [33m[1mWARNING [0m | [36mservices.database[0m:[36m_create_indexes[0m:[36m94[0m | [33m[1m索引创建失败: Command createIndexes requires authentication, full error: {'ok': 0.0, 'errmsg': 'Command createIndexes requires authentication', 'code': 13, 'codeName': 'Unauthorized'}[0m
[32m2025-06-05 16:48:16[0m | [1mINFO    [0m | [36mmain[0m:[36mlifespan[0m:[36m46[0m | [1mDatabase connected successfully[0m
INFO:     Application startup complete.
INFO:     127.0.0.1:63866 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63868 - "GET /health HTTP/1.1" 200 OK
[32m2025-06-05 16:48:23[0m | [31m[1mERROR   [0m | [36mservices.database[0m:[36mget_parsing_stats[0m:[36m406[0m | [31m[1m获取统计信息失败: 'NoneType' object is not subscriptable[0m
[32m2025-06-05 16:48:23[0m | [31m[1mERROR   [0m | [36mapi.admin[0m:[36mget_system_metrics[0m:[36m60[0m | [31m[1m获取系统指标失败: 'NoneType' object is not subscriptable[0m
INFO:     127.0.0.1:63870 - "GET /admin/metrics HTTP/1.1" 500 Internal Server Error
INFO:     127.0.0.1:63870 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:63870 - "GET /docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:63870 - "GET /docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:63870 - "GET /docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:63876 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:63876 - "GET /docs HTTP/1.1" 200 OK
[32m2025-06-05 16:48:48[0m | [31m[1mERROR   [0m | [36mservices.database[0m:[36mget_parsing_stats[0m:[36m406[0m | [31m[1m获取统计信息失败: 'NoneType' object is not subscriptable[0m
[32m2025-06-05 16:48:48[0m | [31m[1mERROR   [0m | [36mapi.admin[0m:[36mget_system_metrics[0m:[36m60[0m | [31m[1m获取系统指标失败: 'NoneType' object is not subscriptable[0m
INFO:     127.0.0.1:63876 - "GET /admin/metrics HTTP/1.1" 500 Internal Server Error
INFO:     127.0.0.1:63876 - "GET /health HTTP/1.1" 200 OK
